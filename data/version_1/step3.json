
{
  "graph": {
    "nodes": [
      {
        "id": "start",
        "type": "start",
        "description": "Procedure starts - UE in 5GMM-DEREGISTERED state",
        "properties": {
          "initial_state": "5GMM-DEREGISTERED"
        }
      },
      {
        "id": "1",
        "type": "process",
        "description": "UE sends REGISTRATION REQUEST message to AMF",
        "properties": {
          "entity": "UE",
          "messages": ["REGISTRATION REQUEST"],
          "state_change": "N/A"
        }
      },
      {
        "id": "2",
        "type": "timer",
        "description": "UE starts timer T3510",
        "properties": {
          "entity": "UE",
          "timer_name": "T3510",
          "action": "start"
        }
      },
      {
        "id": "3",
        "type": "decision",
        "description": "AMF decides to accept or reject the REGISTRATION REQUEST",
        "properties": {
          "condition": "initial registration request is accepted by the network",
          "outcomes": [
            {
              "outcome": "Accept",
              "next_step": "4",
              "outcome_type": "positive"
            },
            {
              "outcome": "Reject",
              "next_step": "reject",
              "outcome_type": "negative"
            }
          ]
        }
      },
      {
        "id": "4",
        "type": "process",
        "description": "AMF sends REGISTRATION ACCEPT message to UE. AMF starts timer T3550 if conditions are met",
        "properties": {
          "entity": "AMF",
          "messages": ["REGISTRATION ACCEPT"],
          "state_change": "5GMM-COMMON-PROCEDURE-INITIATED (if 5G-GUTI or SOR transparent container IE is included)"
        }
      },
      {
        "id": "5",
        "type": "timer",
        "description": "AMF starts timer T3550 if a 5G-GUTI or the SOR transparent container IE is included in the REGISTRATION ACCEPT message",
        "properties": {
          "entity": "AMF",
          "timer_name": "T3550",
          "action": "start",
          "condition": "5G-GUTI or SOR transparent container IE is included in REGISTRATION ACCEPT"
        }
      },
      {
        "id": "6",
        "type": "process",
        "description": "UE receives REGISTRATION ACCEPT, resets registration attempt counter, enters state 5GMM-REGISTERED and sets 5GS update status to 5U1 UPDATED",
        "properties": {
          "entity": "UE",
          "state_change": "5GMM-REGISTERED",
          "update_status": "5U1 UPDATED",
          "action": "reset registration attempt counter"
        }
      },
      {
        "id": "7",
        "type": "decision",
        "description": "Check conditions for REGISTRATION COMPLETE message (Service-level AA, Network slicing, CAG, RCMAP, UE radio capability ID)",
        "properties": {
          "condition": "REGISTRATION ACCEPT message contains service-level AA, network slicing, CAG, RCMAP or UE radio capability information",
          "outcomes": [
            {
              "outcome": "REGISTRATION COMPLETE needed",
              "next_step": "8",
              "outcome_type": "positive"
            },
            {
              "outcome": "REGISTRATION COMPLETE not needed",
              "next_step": "end",
              "outcome_type": "negative"
            }
          ]
        }
      },
      {
        "id": "8",
        "type": "process",
        "description": "UE sends REGISTRATION COMPLETE message to AMF",
        "properties": {
          "entity": "UE",
          "messages": ["REGISTRATION COMPLETE"]
        }
      },
      {
        "id": "9",
        "type": "process",
        "description": "AMF receives REGISTRATION COMPLETE and stops timer T3550, remains in state 5GMM-REGISTERED",
        "properties": {
          "entity": "AMF",
          "action": "stop T3550",
          "timer_name": "T3550",
          "state": "5GMM-REGISTERED"
        }
      },
      {
        "id": "reject",
        "type": "process",
        "description": "AMF sends REGISTRATION REJECT",
        "properties": {
          "entity": "AMF",
          "messages": ["REGISTRATION REJECT"]
        }
      },
      {
        "id": "end",
        "type": "end",
        "description": "Procedure ends",
        "properties": {}
      }
    ],
    "edges": [
      {
        "from": "start",
        "to": "1",
        "type": "sequential",
        "properties": {
          "trigger": "UE in 5GMM-DEREGISTERED state"
        }
      },
      {
        "from": "1",
        "to": "2",
        "type": "sequential",
        "properties": {
          "trigger": "REGISTRATION REQUEST sent"
        }
      },
      {
        "from": "2",
        "to": "3",
        "type": "sequential",
        "properties": {
          "trigger": "Timer T3510 running"
        }
      },
      {
        "from": "3",
        "to": "4",
        "type": "conditional",
        "properties": {
          "condition": "initial registration request is accepted by the network",
          "outcome": "Accept"
        }
      },
      {
        "from": "3",
        "to": "reject",
        "type": "conditional",
        "properties": {
          "condition": "initial registration request cannot be accepted by the network",
          "outcome": "Reject"
        }
      },
      {
        "from": "4",
        "to": "5",
        "type": "conditional",
        "properties": {
          "condition": "5G-GUTI or SOR transparent container IE is included in REGISTRATION ACCEPT",
          "outcome": "Timer needs to be started"
        }
      },
      {
        "from": "4",
        "to": "6",
        "type": "sequential",
        "properties": {
          "trigger": "REGISTRATION ACCEPT sent"
        }
      },
      {
        "from": "5",
        "to": "6",
        "type": "sequential",
        "properties": {
          "trigger": "Timer T3550 is started"
        }
      },
      {
        "from": "6",
        "to": "7",
        "type": "sequential",
        "properties": {
          "trigger": "Registration Accept was received"
        }
      },
      {
        "from": "7",
        "to": "8",
        "type": "conditional",
        "properties": {
          "condition": "REGISTRATION ACCEPT message contains service-level AA, network slicing, CAG, RCMAP or UE radio capability information",
          "outcome": "REGISTRATION COMPLETE needed"
        }
      },
      {
        "from": "7",
        "to": "end",
        "type": "conditional",
        "properties": {
          "condition": "REGISTRATION ACCEPT message does not contain service-level AA, network slicing, CAG, RCMAP or UE radio capability information",
          "outcome": "REGISTRATION COMPLETE not needed"
        }
      },
      {
        "from": "8",
        "to": "9",
        "type": "sequential",
        "properties": {
          "trigger": "UE sends Registration Complete message"
        }
      },
      {
        "from": "9",
        "to": "end",
        "type": "sequential",
        "properties": {
          "trigger": "AMF Receives Registration Complete Message"
        }
      }
    ]
  }
}
